<!DOCTYPE html>
<html lang="ru">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<head>
    <meta charset="UTF-8">
    <title>UnderVerse RP - –¢–µ—Å—Ç API</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background: #1a1a2e;
            color: white;
            text-align: center;
            padding: 50px;
        }
        button {
            background: #4cc9f0;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px;
        }
        .result {
            margin: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <h1>UnderVerse RP</h1>
    <p>–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API –∏ –ò–ò</p>

    <button onclick="testAPI()">üîå –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API</button>
    <button onclick="testAI()">ü§ñ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ò</button>
    <button onclick="testCharacter()">üé≠ –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>

    <div id="result" class="result"></div>

    <script>
    function showResult(message, isError = false) {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = message;
        resultDiv.style.color = isError ? '#ff6b6b' : '#4cc9f0';
    }

    async function testAPI() {
        try {
            showResult('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º API...');
            const response = await fetch('https://77.233.222.187/api/health');
            const data = await response.json();
            showResult('‚úÖ API –†–ê–ë–û–¢–ê–ï–¢!<br>' + data.status + ' - ' + data.message);
        } catch (error) {
            showResult('‚ùå –û—à–∏–±–∫–∞ API: ' + error.message, true);
        }
    }

    async function testAI() {
        try {
            showResult('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ò–ò...');
            const response = await fetch('https://77.233.222.187/api/ai/health');
            const data = await response.json();
            showResult('‚úÖ –ò–ò –ü–û–î–ö–õ–Æ–ß–ï–ù!<br>' + data.message);
        } catch (error) {
            showResult('‚ùå –û—à–∏–±–∫–∞ –ò–ò: ' + error.message, true);
        }
    }

    async function testCharacter() {
        try {
            showResult('üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...');

            // –¢–µ—Å—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
            const testAnswers = {
                personality: "–î–æ–±—Ä—ã–π –∏ –ª—é–±–æ–ø—ã—Ç–Ω—ã–π",
                combat_style: "–î–∏–ø–ª–æ–º–∞—Ç–∏—è",
                magic: "–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"
            };

            const response = await fetch('https://77.233.222.187/api/generate-character', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ answers: testAnswers })
            });

            const data = await response.json();
            if (data.success) {
                showResult('‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω!<br>' +
                          '–ò–º—è: ' + data.character.name + '<br>' +
                          '–î—É—à–∞: ' + data.character.soul_color + '<br>' +
                          '–ê–£: ' + data.character.au);
            } else {
                showResult('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ' + data.message, true);
            }
        } catch (error) {
            showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, true);
        }
    }

    async function testCharacter() {
        try {
            showResult('üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...');

            // –¢–µ—Å—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
            const testAnswers = {
                personality: "–î–æ–±—Ä—ã–π –∏ –ª—é–±–æ–ø—ã—Ç–Ω—ã–π",
                combat_style: "–î–∏–ø–ª–æ–º–∞—Ç–∏—è",
                magic: "–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"
            };

            const response = await fetch('https://77.233.222.187/api/generate-character', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ answers: testAnswers })
            });

            const data = await response.json();
            if (data.success) {
                showResult('‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω!<br>' +
                          '–ò–º—è: ' + data.character.name + '<br>' +
                          '–î—É—à–∞: ' + data.character.soul_color + '<br>' +
                          '–ê–£: ' + data.character.au);
            } else {
                showResult('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ' + data.message, true);
            }
        } catch (error) {
            showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, true);
        }
    }
    </script>
</body>
</html>
