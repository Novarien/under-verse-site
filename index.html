<script>
// –ò—Å–ø–æ–ª—å–∑—É–µ–º CORS proxy –¥–ª—è –æ–±—Ö–æ–¥–∞ mixed content
const API_BASE_URL = 'http://77.233.222.187';
const CORS_PROXY = 'https://cors-anywhere.herokuapp.com';

async function testAPI() {
    try {
        showResult('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º API...');
        const response = await fetch(`${CORS_PROXY}/${API_BASE_URL}/api/health`);
        const data = await response.json();
        showResult('‚úÖ API –†–ê–ë–û–¢–ê–ï–¢!<br>–°—Ç–∞—Ç—É—Å: ' + data.status);
    } catch (error) {
        showResult('‚ùå –û—à–∏–±–∫–∞ API: ' + error.message, true);
    }
}

async function testAI() {
    try {
        showResult('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ò–ò...');
        const response = await fetch(`${CORS_PROXY}/${API_BASE_URL}/api/ai/health`);
        const data = await response.json();
        showResult('‚úÖ –ò–ò: ' + data.message);
    } catch (error) {
        showResult('‚ùå –û—à–∏–±–∫–∞ –ò–ò: ' + error.message, true);
    }
}

async function testCharacter() {
    try {
        showResult('üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...');
        
        const testAnswers = {
            personality: "–î–æ–±—Ä—ã–π –∏ –ª—é–±–æ–ø—ã—Ç–Ω—ã–π",
            combat_style: "–î–∏–ø–ª–æ–º–∞—Ç–∏—è",
            magic: "–°–ª–∞–±–æ–µ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"
        };
        
        const response = await fetch(`${CORS_PROXY}/${API_BASE_URL}/api/generate-character`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ answers: testAnswers })
        });
        
        const data = await response.json();
        if (data.success) {
            showResult('‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω!<br>–ò–º—è: ' + data.character.name);
        } else {
            showResult('‚ùå –û—à–∏–±–∫–∞: ' + data.message, true);
        }
    } catch (error) {
        showResult('‚ùå –û—à–∏–±–∫–∞: ' + error.message, true);
    }
}
</script>